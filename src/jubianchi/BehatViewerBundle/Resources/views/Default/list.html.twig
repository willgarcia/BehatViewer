{% extends 'BehatViewerBundle::layout.table.html.twig' %}

{% if not items and session.build %}
    {% set items = session.build.features %}
{% endif %}

{% block title %}
    <h1 class="page-header">
        {% if not tag is defined %}
            Features for {{ session.project.name }}
        {% else %}
            Tag {{ tag.name }}
        {% endif %}

        {% if build %}
            <small>(#{{ build.id }} Built <span data-rel="moment">{{ build.date|date("Y-m-d H:i:s")}}</span>)</small>
        {% endif %}

        {% include 'BehatViewerBundle::Default/switcher.html.twig' %}
    </h1>
{% endblock %}

{% block sort %}{sortlist: [[1,0]]}{% endblock %}

{% block thead %}
    <tr>
        <th>Name</th>
        <th>Completion</th>
        <th>Progress</th>
        <th>Details</th>
        <th class="{sorter: false}">Action</th>
    </tr>
{% endblock %}

{% block tbody %}
    {% for feature in items %}
        {% include 'BehatViewerBundle::Default/feature-row.html.twig' %}
    {% endfor %}
{% endblock %}

{% block alert %}
    <div class="alert alert-block alert-info">
        <h4 class="alert-heading">No feature</h4>

        <p>
            This project has not been built yet.
            To build it, please run <code>app/console behat-viewer:build {{ session.project.slug }}</code>.
        </p>
    </div>
{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        JSC.require(
            ['jquery.metadata', 'jquery.tablesorter', 'behat-viewer/home-list'],
            function() {
                $(function() {
                    app.controller.current(new HomeListController('#container'));
                });
            }
        );
    </script>
{% endblock %}
